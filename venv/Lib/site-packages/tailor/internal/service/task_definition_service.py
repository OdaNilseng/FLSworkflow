# -*- coding: utf-8 -*-
import uuid
from typing import List

from tailor.internal.domain.postgres.models import TaskDefinitionDao, AccountDao, \
    ProjectDao
from tailor.internal.domain.task_definition import TaskDefinitionRepository


class TaskDefinitionService:
    def __init__(self):
        self.repository: TaskDefinitionRepository = TaskDefinitionRepository()

    def create(self, name: str,
               json_definition: dict,
               account: AccountDao,
               projects: List[ProjectDao]) -> TaskDefinitionDao:
        task_def = TaskDefinitionDao(name=name,
                                     json_definition=json_definition,
                                     account=account,
                                     projects=projects
                                     )
        return self.insert(task_def)

    def insert(self, task_def: TaskDefinitionDao) -> TaskDefinitionDao:
        return self.repository.insert(task_def)

    def find_by_id(self, user_id) -> TaskDefinitionDao:
        return self.repository.find_by_id(user_id)

    def find_by_name(self, name: str) -> TaskDefinitionDao:
        return self.repository.find_by_name(name)
