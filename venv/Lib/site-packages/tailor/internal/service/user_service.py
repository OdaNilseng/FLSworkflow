# -*- coding: utf-8 -*-
import uuid
from typing import List

from tailor.internal.domain.postgres.models import UserDao, UserIdProvider, AccountDao, \
    ProjectDao
from tailor.internal.domain.user import UserRepository


class UserService:
    def __init__(self):
        self.repository: UserRepository = UserRepository()

    def create(self, username: str,
               accounts: List[AccountDao],
               projects: List[ProjectDao],
               id_provider=UserIdProvider.COGNITO_TAILOR) -> UserDao:
        user = UserDao(username=username,
                       accounts=accounts,
                       projects=projects,
                       id_provider=id_provider,
                       uuid=str(uuid.uuid4())
                       )
        return self.insert(user)

    def insert(self, user: UserDao) -> UserDao:
        return self.repository.insert(user)

    def find_by_id(self, user_id) -> UserDao:
        return self.repository.find_by_id(user_id)

    def find_by_username(self, username: str) -> UserDao:
        return self.repository.find_by_username(username)

    def find_all(self) -> List[UserDao]:
        return self.repository.find_all()

